name: pfp-train-env
# Extended environment based on torch-env-dexter (Dexter DGX A100 cluster).
# Adds PointFlowMatch-specific packages on top of the validated base.
#
# Usage (from repo root on Dexter):
#   conda env create -f dexter/pfp_train_env.yml -p ./pfp-train-env
#   conda activate ./pfp-train-env
#   pip install -e ../diffusion_policy
#   pip install -e . --no-deps   # --no-deps to avoid conflicts with base numpy/torch versions

channels:
  - pytorch3d
  - conda-forge
  - defaults

dependencies:
  # ── Base packages from torch-env-dexter (verbatim, do not change) ──────────
  - _openmp_mutex=4.5
  - alsa-lib=1.2.15.1
  - aom=3.9.1
  - attr=2.5.2
  - bzip2=1.0.8
  - ca-certificates=2025.11.12
  - cairo=1.18.4
  - cpython=3.10.19
  - cuda-crt-tools=12.9.86
  - cuda-cudart=12.9.79
  - cuda-cudart_linux-64=12.9.79
  - cuda-cuobjdump=12.9.82
  - cuda-cupti=12.9.79
  - cuda-nvcc-tools=12.9.86
  - cuda-nvdisasm=12.9.88
  - cuda-nvrtc=12.9.86
  - cuda-nvtx=12.9.79
  - cuda-nvvm-tools=12.9.86
  - cuda-version=12.9
  - cudnn=9.10.2.21
  - dav1d=1.2.1
  - dbus=1.16.2
  - ffmpeg=8.0.1
  - filelock=3.20.1
  - fmt=12.0.0
  - font-ttf-dejavu-sans-mono=2.37
  - font-ttf-inconsolata=3.000
  - font-ttf-source-code-pro=2.038
  - font-ttf-ubuntu=0.83
  - fontconfig=2.15.0
  - fonts-conda-ecosystem=1
  - fonts-conda-forge=1
  - freetype=2.14.1
  - fribidi=1.0.16
  - fsspec=2025.12.0
  - gdk-pixbuf=2.44.4
  - giflib=5.2.2
  - glslang=16.1.0
  - gmp=6.3.0
  - gmpy2=2.2.1
  - graphite2=1.3.14
  - harfbuzz=12.2.0
  - icu=78.1
  - intel-gmmlib=22.9.0
  - intel-media-driver=25.3.4
  - jinja2=3.1.6
  - kaldi=5.5.1172
  - lame=3.100
  - lcms2=2.17
  - ld_impl_linux-64=2.45
  - lerc=4.0.0
  - level-zero=1.26.3
  - libabseil=20250512.1
  - libass=0.17.4
  - libavif16=1.3.0
  - libblas=3.11.0
  - libcap=2.77
  - libcblas=3.11.0
  - libcublas=12.9.1.4
  - libcudnn=9.10.2.21
  - libcudnn-dev=9.10.2.21
  - libcudss=0.7.1.4
  - libcufft=11.4.1.4
  - libcufile=1.14.1.1
  - libcurand=10.3.10.19
  - libcusolver=11.7.5.82
  - libcusparse=12.5.10.65
  - libde265=1.0.15
  - libdeflate=1.25
  - libdrm=2.4.125
  - libegl=1.7.0
  - libexpat=2.7.3
  - libffi=3.5.2
  - libflac=1.5.0
  - libfreetype=2.14.1
  - libfreetype6=2.14.1
  - libgcc=15.2.0
  - libgcc-ng=15.2.0
  - libgfortran=15.2.0
  - libgfortran5=15.2.0
  - libgl=1.7.0
  - libglib=2.86.3
  - libglvnd=1.7.0
  - libglx=1.7.0
  - libheif=1.19.7
  - libhwloc=2.12.1
  - libiconv=1.18
  - libjpeg-turbo=3.1.2
  - liblapack=3.11.0
  - liblapacke=3.11.0
  - liblzma=5.8.1
  - libmagma=2.9.0
  - libmagma_sparse=2.9.0
  - libnl=3.11.0
  - libnpp=12.4.1.87
  - libnsl=2.0.1
  - libnvjitlink=12.9.86
  - libnvjpeg=12.4.0.76
  - libogg=1.3.5
  - libopenvino=2025.4.1
  - libopenvino-auto-batch-plugin=2025.4.1
  - libopenvino-auto-plugin=2025.4.1
  - libopenvino-hetero-plugin=2025.4.1
  - libopenvino-intel-cpu-plugin=2025.4.1
  - libopenvino-intel-gpu-plugin=2025.4.1
  - libopenvino-intel-npu-plugin=2025.4.1
  - libopenvino-ir-frontend=2025.4.1
  - libopenvino-onnx-frontend=2025.4.1
  - libopenvino-paddle-frontend=2025.4.1
  - libopenvino-pytorch-frontend=2025.4.1
  - libopenvino-tensorflow-frontend=2025.4.1
  - libopenvino-tensorflow-lite-frontend=2025.4.1
  - libopus=1.6
  - libpciaccess=0.18
  - libpng=1.6.53
  - libprotobuf=6.31.1
  - librsvg=2.60.0
  - libsndfile=1.2.2
  - libsqlite=3.51.1
  - libstdcxx=15.2.0
  - libstdcxx-ng=15.2.0
  - libsystemd0=258.3
  - libtiff=4.7.1
  - libtorch=2.9.1
  - libudev1=258.3
  - libunwind=1.8.3
  - liburing=2.12
  - libusb=1.0.29
  - libuuid=2.41.3
  - libuv=1.51.0
  - libva=2.23.0
  - libvorbis=1.3.7
  - libvpl=2.15.0
  - libvpx=1.15.2
  - libvulkan-loader=1.4.328.1
  - libwebp-base=1.6.0
  - libxcb=1.17.0
  - libxcrypt=4.4.36
  - libxkbcommon=1.13.1
  - libxml2=2.15.1
  - libxml2-16=2.15.1
  - libzlib=1.3.1
  - llvm-openmp=21.1.8
  - markupsafe=3.0.3
  - mkl=2025.3.0
  - mpc=1.3.1
  - mpfr=4.2.1
  - mpg123=1.32.9
  - mpmath=1.3.0
  - nccl=2.29.2.1
  - ncurses=6.5
  - networkx=3.4.2
  - numpy=2.2.6
  - ocl-icd=2.3.3
  - opencl-headers=2025.06.13
  - openfst=1.8.4
  - openh264=2.6.0
  - openjpeg=2.5.4
  - openssl=3.6.0
  - optree=0.18.0
  - pango=1.56.4
  - pcre2=10.47
  - pillow=12.0.0
  - pip=25.3
  - pixman=0.46.4
  - pthread-stubs=0.4
  - pugixml=1.15
  - pulseaudio-client=17.0
  - pybind11=3.0.1
  - pybind11-abi=11
  - pybind11-global=3.0.1
  - python=3.10.19
  - python_abi=3.10
  - pytorch=2.9.1
  - rav1e=0.7.1
  - rdma-core=60.0
  - readline=8.3
  - sdl2=2.32.56
  - sdl3=3.2.28
  - setuptools=80.9.0
  - shaderc=2025.5
  - sleef=3.9.0
  - snappy=1.2.2
  - spirv-tools=2025.4
  - svt-av1=3.1.2
  - sympy=1.14.0
  - tbb=2022.3.0
  - tk=8.6.13
  - torchaudio=2.9.1
  - torchcodec=0.8.1
  - torchvision=0.24.1
  - torchvision-extra-decoders=0.0.2
  - triton=3.5.1
  - typing-extensions=4.15.0
  - typing_extensions=4.15.0
  - tzdata=2025c
  - wayland=1.24.0
  - wayland-protocols=1.47
  - wheel=0.45.1
  - x264=1!164.3095
  - x265=3.5
  - xkeyboard-config=2.46
  - xorg-libice=1.1.2
  - xorg-libsm=1.2.6
  - xorg-libx11=1.8.12
  - xorg-libxau=1.0.12
  - xorg-libxcursor=1.2.3
  - xorg-libxdmcp=1.1.5
  - xorg-libxext=1.3.6
  - xorg-libxfixes=6.0.2
  - xorg-libxrandr=1.5.4
  - xorg-libxrender=0.9.12
  - xorg-libxscrnsaver=1.2.4
  - zlib-ng=2.3.2
  - zstd=1.5.7

  # ── PointFlowMatch additions (conda) ───────────────────────────────────────
  - matplotlib
  - numba
  - zarr
  # pytorch3d pre-built binary from the official pytorch3d conda channel.
  # If the channel doesn't yet have a build for torch 2.9.1, comment this out
  # and install via pip (see note below).
  - pytorch3d

  # ── PointFlowMatch additions (pip) ────────────────────────────────────────
  # (Do NOT add "-e ." here: conda resolves it relative to the yml dir and fails.
  #  Install the repo manually after: pip install -e . --no-deps)
  - pip:
      # 3D geometry
      - open3d==0.18.0
      - trimesh==4.3.2
      - pypose
      - "geomstats[pytorch]==2.7.0"
      # Robotics
      - spatialmath-python==1.1.9
      - yourdfpy==0.0.56
      # Deep learning extras (huggingface_hub 0.25.x: diffusers 0.27 uses cached_download, removed in 0.26+)
      - huggingface_hub==0.25.2
      - einops==0.7.0
      - diffusers==0.27.2
      - "composer<=0.21.3"
      # Experiment tooling
      - hydra-core==1.3.2
      - "wandb<=0.17.3"
      - rerun-sdk==0.15.1
      # Utils
      - "ipython<=8.17.2"
      - prompt-toolkit==3.0.36
